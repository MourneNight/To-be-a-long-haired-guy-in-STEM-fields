
## 布尔值与 Nil（Boolen and Nil）

- Ruby 中只有两个假值：**false** 和 **nil**
- 所有其他对象（包括 `0`、空字符串 `""`、空数组 `[]` 等）在条件表达式中都视为 **true**

| 值       | 含义                   | 在条件表达式中 |
| ------- | -------------------- | ------- |
| `true`  | 真值                   | true    |
| `false` | 假值                   | false   |
| `nil`   | 表示“无”或“不存在”          | false   |
| 其他      | 任何非 false/non-nil 对象 | true    |

**示例**：
```ruby
if nil      # => false
if false    # => false
if 0        # => true
if ""       # => true
if []       # => true
```

**注意**：`nil` 是对象（`NilClass` 的唯一实例），常用于表示变量未赋值或方法无返回值。


## 数值字面量（Number Literals）

#### 整数（Integer）
- 下划线 `_` 可任意位置插入，提高可读性（被忽略）
- 不同进制前缀（字母大小写不敏感）：

| 进制     | 前缀   | 示例              |
|----------|--------|-------------------|
| 十进制   | 0d     | `0d123` → 123     |
| 十六进制 | 0x     | `0xFF` → 255      |
| 八进制   | 0 或 0o| `077` 或 `0o77` → 63 |
| 二进制   | 0b     | `0b1010` → 10     |

#### 浮点数（Float）
- 下划线 `_` 同整数用法
- 支持科学计数法：`e` 或 `E`

```ruby
1_234.56
1.23e4    # => 12300.0
5E-3      # => 0.005
```

#### 有理数（Rational）字面量
- 后缀 `r` 表示有理数（自动约分）

```ruby
1r          # => (1/1)
2/3r        # => (2/3)
-2/4r       # => (-1/2)     # 自动约分
1.2r        # => (6/5)
11/21r      # => (11/21)
1_000r      # => (1000/1)
```

**注意**：
- 分母前不能有小数点，否则被解析为浮点数除法：
```ruby
1.2/3r      # => 0.39999999999999997（Float）
(1.2/3).r   # => (2/5)（正确转为 Rational）
```

#### 复数（Complex）字面量
- 后缀 `i` 表示复数
- `ri` 组合可表示有理数虚部（避免浮点精度问题）

```ruby
12.3i       # => (0.0 + 12.3i)
12.3ri      # => (0 + (123/10)i)   # 有理数虚部
1ri         # => (0 + 1i)
(1/3)ri     # => (0 + (1/3)i)
```

**规则**：`i` 必须在 `r` 之后（`ri` 而非 `ir`）。


## 字符串（String）

#### 转义序列（Escape Sequences）
双引号字符串和相关字面量支持以下转义序列：

| 序列          | 含义                          | ASCII   |
|---------------|-------------------------------|---------|
| `\a`          | 响铃（bell）                  | 07h    |
| `\b`          | 退格（backspace）             | 08h    |
| `\t`          | 水平制表符（tab）             | 09h    |
| `\n`          | 换行（newline）               | 0Ah    |
| `\v`          | 垂直制表符                    | 0Bh    |
| `\f`          | 换页（form feed）             | 0Ch    |
| `\r`          | 回车（carriage return）       | 0Dh    |
| `\e`          | Escape                        | 1Bh    |
| `\s`          | 空格                          | 20h    |
| `\\`          | 反斜杠本身                    |         |
| `\nnn`        | 八进制（1-3位）               |         |
| `\xnn`        | 十六进制（1-2位）             |         |
| `\unnnn`      | Unicode（恰好4位十六进制）    |         |
| `\u{nnnn ...}`| 多个Unicode（1-6位十六进制）  |         |
| `\cx` / `\C-x`| Control 字符                  |         |
| `\M-x`        | Meta 字符（最高位置1）        |         |
| `\M-\C-x`     | Meta-Control 字符             |         |
| `\c?`         | Delete 字符                   | 7Fh    |
| `\<newline>`  | 续行（忽略换行）              |         |

#### 双引号字符串（Double-Quoted）
- 支持转义序列和插值 `#{...}`
- `#` 可作为 `#{}` 的简写（如 `"#{'ok'}"`）

#### 单引号字符串（Single-Quoted）
- 禁用插值和大部分转义
- 仅允许 `\'` 和 `\\` 转义（其他 `\x` 视为字面 `\` + `x`）

#### 字符串连接
相邻字符串字面量自动连接：
```ruby
"hello " "world"  # => "hello world"
"hello " \
"world"          # => "hello world"
```

#### Here Document（<<）
- 基本形式：`<<IDENTIFIER` ... `IDENTIFIER`
- `<<-IDENTIFIER`：允许结束标识符缩进
- `<<~IDENTIFIER`：自动去除所有行共有最小缩进（Tab 按 1-8 空格计算）
- 用单引号包裹标识符禁用插值和转义：`<<'IDENT'`
- 支持同时多个：
```ruby
puts(<<-A, <<~B)
  第一段
  A
  第二段（自动去缩进）
  B
```

#### 字符字面量（旧语法）
`?x` 表示字符 `x` 或转义序列（已不推荐）

#### 符号（Symbol）
- 字面量：`:name`、`:"with space"`、`: "#{expr}"`
- 用单引号禁用插值：`:'no #{interp}'`

#### 数组字面量（Array）
`[elem1, elem2, ...]`（元素可含表达式）

#### 哈希字面量（Hash）
```ruby
{ key => value, ... }
{ sym: value, ... }          # 简写（键为 Symbol）
{ "complex #{key}": val }    # 复杂键需引号
{ :"#{expr}": val }
{ var:, oth: }               # Ruby 3+ 简写局部变量键
```

#### 范围字面量（Range）
```ruby
1..5    # 包含末尾
1...5   # 排除末尾
1..     # 无结束（无限）
..10    # 无开始（从负无穷）
```

#### 正则字面量（Regexp）
`/pattern/`（支持插值和转义）

#### Lambda 字面量
```ruby
-> { expr }
->(a, b) { a + b }
```

#### 百分号字面量（% Notation）

| 类型   | 含义                        | 插值 | 示例                          |
|--------|-----------------------------|------|-------------------------------|
| `%q`   | 单引号字符串                | 否   | `%q[hello\n]` → "hello\\n"   |
| `%Q` / `%` | 双引号字符串            | 是   | `%Q[#{1+1}]` → "2"           |
| `%w`   | 单词数组（无插值）          | 否   | `%w[a b c]` → ["a", "b", "c"]|
| `%W`   | 单词数组（有插值）          | 是   | `%W[#{1} b]` → ["1", "b"]    |
| `%i`   | 符号数组（无插值）          | 否   | `%i[a b]` → [:a, :b]         |
| `%I`   | 符号数组（有插值）          | 是   | `%I[#{:x}]` → [:x]           |
| `%s`   | 符号（无插值）              | 否   | `%s[hello]` → :hello         |
| `%r`   | 正则表达式                  | 是   | `%r[^a-z]` → /^a-z/          |
| `%x`   | 反引号命令（执行 shell）    | 是   | `%x[echo hi]` → "hi\n"       |

- 分隔符：`[] () {} <>` 等成对字符，支持嵌套
- 空白字符（空格、Tab、换行等）作为单词分隔，可用 `\` 转义